"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

function _default(route) {
  route.get('/whoami', (req, res, next) => {
    if (req.headers.referer === 'whoami') {
      next({
        username: req.remote_user.name
      });
    } else {
      next('route');
    }
  });
  route.get('/-/whoami', (req, res, next) => {
    next({
      username: req.remote_user.name
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvZW5kcG9pbnQvYXBpL3dob2FtaS50cyJdLCJuYW1lcyI6WyJyb3V0ZSIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJoZWFkZXJzIiwicmVmZXJlciIsInVzZXJuYW1lIiwicmVtb3RlX3VzZXIiLCJuYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR2Usa0JBQVVBLEtBQVYsRUFBK0I7QUFDNUNBLEVBQUFBLEtBQUssQ0FBQ0MsR0FBTixDQUFVLFNBQVYsRUFBcUIsQ0FBQ0MsR0FBRCxFQUFzQkMsR0FBdEIsRUFBcUNDLElBQXJDLEtBQXNFO0FBQ3pGLFFBQUlGLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxPQUFaLEtBQXdCLFFBQTVCLEVBQXNDO0FBQ3BDRixNQUFBQSxJQUFJLENBQUM7QUFBRUcsUUFBQUEsUUFBUSxFQUFFTCxHQUFHLENBQUNNLFdBQUosQ0FBZ0JDO0FBQTVCLE9BQUQsQ0FBSjtBQUNELEtBRkQsTUFFTztBQUNMTCxNQUFBQSxJQUFJLENBQUMsT0FBRCxDQUFKO0FBQ0Q7QUFDRixHQU5EO0FBUUFKLEVBQUFBLEtBQUssQ0FBQ0MsR0FBTixDQUFVLFdBQVYsRUFBdUIsQ0FBQ0MsR0FBRCxFQUFzQkMsR0FBdEIsRUFBcUNDLElBQXJDLEtBQXFFO0FBQzFGQSxJQUFBQSxJQUFJLENBQUM7QUFBRUcsTUFBQUEsUUFBUSxFQUFFTCxHQUFHLENBQUNNLFdBQUosQ0FBZ0JDO0FBQTVCLEtBQUQsQ0FBSjtBQUNELEdBRkQ7QUFHRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc3BvbnNlLCBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7ICRSZXF1ZXN0RXh0ZW5kLCAkTmV4dEZ1bmN0aW9uVmVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocm91dGU6IFJvdXRlcik6IHZvaWQge1xuICByb3V0ZS5nZXQoJy93aG9hbWknLCAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiBSZXNwb25zZSwgbmV4dDogJE5leHRGdW5jdGlvblZlcik6IHZvaWQgPT4ge1xuICAgIGlmIChyZXEuaGVhZGVycy5yZWZlcmVyID09PSAnd2hvYW1pJykge1xuICAgICAgbmV4dCh7IHVzZXJuYW1lOiByZXEucmVtb3RlX3VzZXIubmFtZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dCgncm91dGUnKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJvdXRlLmdldCgnLy0vd2hvYW1pJywgKHJlcTogJFJlcXVlc3RFeHRlbmQsIHJlczogUmVzcG9uc2UsIG5leHQ6ICROZXh0RnVuY3Rpb25WZXIpOiBhbnkgPT4ge1xuICAgIG5leHQoeyB1c2VybmFtZTogcmVxLnJlbW90ZV91c2VyLm5hbWUgfSk7XG4gIH0pO1xufVxuIl19